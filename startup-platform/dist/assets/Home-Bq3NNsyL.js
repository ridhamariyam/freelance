import{u as k,j as e,a as w}from"./index-DivRhMHd.js";import{r as l,b as v}from"./vendor-CK5te7td.js";import{C as u}from"./Card-Bbi7mgzH.js";import{S as C,C as S}from"./CategoryFilter-Bb_510_A.js";import{u as F}from"./useRecentlyViewed-CqK5mP1y.js";import"./useBookmarks-7D6JGkQb.js";const b="lb_notif_read",y=[{id:"n1",title:"New startup added in AI",body:"NeuralDraft just joined â€” AI writing tools for founders.",time:"2m ago",icon:"ðŸš€"},{id:"n2",title:"Your listing got 12 views",body:"People are checking out your submission today.",time:"1h ago",icon:"ðŸ‘€"},{id:"n3",title:"Trending in Climate Tech",body:"Verdant is gaining traction this week.",time:"3h ago",icon:"ðŸ“ˆ"},{id:"n4",title:"New resource available",body:"Y Combinator application guide is now live.",time:"5h ago",icon:"ðŸ“š"},{id:"n5",title:"Community post trending",body:'"How we grew to 1,000 users" â€” 47 reactions.',time:"1d ago",icon:"ðŸ’¬"},{id:"n6",title:"Weekly digest ready",body:"6 new startups joined Launchbase this week.",time:"2d ago",icon:"ðŸ“§"},{id:"n7",title:"New service listing",body:"DesignPro Studio is now accepting projects.",time:"3d ago",icon:"ðŸŽ¨"}];function L(){try{return new Set(JSON.parse(localStorage.getItem(b)||"[]"))}catch{return new Set}}function B(){const[i,d]=l.useState(L),s=l.useCallback(a=>{d(o=>{const c=new Set(o);return c.add(a),localStorage.setItem(b,JSON.stringify([...c])),c})},[]),g=l.useCallback(()=>{const a=new Set(y.map(o=>o.id));localStorage.setItem(b,JSON.stringify([...a])),d(a)},[]),x=y.filter(a=>!i.has(a.id)).length;return{notifications:y,readIds:i,unreadCount:x,markRead:s,markAllRead:g}}function E({notifications:i,readIds:d,unreadCount:s,markRead:g,markAllRead:x,onClose:a}){const{addToast:o}=k();l.useEffect(()=>{const n=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=n}},[]);const c=async()=>{if(!("Notification"in window)){o({message:"Push notifications aren't supported on this device."});return}if(Notification.permission==="granted"){new Notification("Launchbase",{body:"Notifications are already enabled!",icon:"/icons/icon-192.png"});return}await Notification.requestPermission()==="granted"?(new Notification("Launchbase",{body:"You'll now get notified about new startups and updates.",icon:"/icons/icon-192.png"}),o({message:"Push notifications enabled!",type:"success"})):o({message:"Notifications blocked. You can enable them in browser settings."})},h=()=>{o({message:"New startups added in AI category ðŸš€",type:"info",duration:5e3})};return e.jsxs("div",{className:"fixed inset-0 z-[80] flex flex-col justify-end",style:{maxWidth:"28rem",margin:"0 auto"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},onClick:a}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-3xl sheet-up flex flex-col max-h-[85vh]",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1 flex-shrink-0",children:e.jsx("div",{className:"w-9 h-1 bg-gray-200 dark:bg-gray-700 rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"Notifications"}),s>0&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:[s," unread"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsx("button",{onClick:x,className:"text-xs font-semibold text-[#5B6CF6] active:opacity-60 transition-opacity",children:"Mark all read"}),e.jsx("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center rounded-xl bg-gray-100 dark:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors ml-1","aria-label":"Close notifications",children:e.jsx("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",className:"text-gray-600 dark:text-gray-300"})})})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:i.map((n,f)=>{const t=d.has(n.id);return e.jsxs("button",{onClick:()=>g(n.id),className:`w-full flex items-start gap-3.5 px-5 py-4 text-left transition-colors active:bg-gray-50 dark:active:bg-gray-800/60 ${f<i.length-1?"border-b border-gray-100 dark:border-gray-800":""} ${t?"bg-white dark:bg-gray-900":"bg-[#EEF0FE]/60 dark:bg-[#5B6CF6]/[0.08]"}`,children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center text-lg leading-none",children:n.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:`text-sm leading-snug ${t?"text-gray-600 dark:text-gray-400 font-normal":"text-gray-900 dark:text-white font-semibold"}`,children:n.title}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 mt-0.5",children:[e.jsx("span",{className:"text-[11px] text-gray-400 dark:text-gray-500 whitespace-nowrap",children:n.time}),!t&&e.jsx("div",{className:"w-2 h-2 bg-[#5B6CF6] rounded-full flex-shrink-0"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-relaxed",children:n.body})]})]},n.id)})}),e.jsxs("div",{className:"flex-shrink-0 px-5 py-4 border-t border-gray-100 dark:border-gray-800 flex gap-2.5",children:[e.jsx("button",{onClick:h,className:"flex-1 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm font-semibold rounded-xl active:bg-gray-200 dark:active:bg-gray-700 transition-colors",children:"Test notification"}),e.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-[#EEF0FE] dark:bg-[#5B6CF6]/20 text-[#5B6CF6] text-sm font-semibold rounded-xl active:opacity-70 transition-opacity",children:"Enable push"})]}),e.jsx("div",{className:"safe-bottom flex-shrink-0"})]})]})}function I(){const[i,d]=l.useState(!1),s=B();return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(!0),className:"relative w-9 h-9 flex items-center justify-center rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-100 dark:border-gray-700 active:bg-gray-50 dark:active:bg-gray-700 transition-colors","aria-label":`Notifications${s.unreadCount>0?`, ${s.unreadCount} unread`:""}`,children:[e.jsx("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6.002 6.002 0 0 0-4-5.659V5a2 2 0 1 0-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 1 1-6 0v-1m6 0H9",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600 dark:text-gray-300"})}),s.unreadCount>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 rounded-full flex items-center justify-center px-1",children:e.jsx("span",{className:"text-[10px] font-bold text-white leading-none",children:s.unreadCount>9?"9+":s.unreadCount})})]}),i&&e.jsx(E,{...s,onClose:()=>d(!1)})]})}function A(){const i=new Date().getHours();return i<12?"Good morning":i<17?"Good afternoon":"Good evening"}const R=["s1","sv1","r2"];function Y(){const[i,d]=l.useState(""),[s,g]=l.useState("all"),x=v(),{allListings:a}=w(),{recent:o}=F(),c=l.useMemo(()=>o.map(t=>a.find(r=>r.id===t)).filter(Boolean),[o,a]),h=l.useMemo(()=>a.filter(t=>R.includes(t.id)),[a]),n=l.useMemo(()=>{let t=a;if(s!=="all"&&(t=t.filter(r=>r.type===s)),i.trim()){const r=i.toLowerCase();t=t.filter(m=>{var p,j;return m.name.toLowerCase().includes(r)||m.tagline.toLowerCase().includes(r)||((p=m.category)==null?void 0:p.toLowerCase().includes(r))||((j=m.tags)==null?void 0:j.some(N=>N.toLowerCase().includes(r)))})}return t},[s,i,a]),f=i.trim()||s!=="all";return e.jsxs("main",{className:"pb-nav page-enter",children:[e.jsxs("div",{className:"px-4 pt-5 pb-1 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A()}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:"Launchbase"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-0.5",children:"Discover what's being built"})]}),e.jsx("div",{className:"mt-1",children:e.jsx(I,{})})]}),e.jsx("div",{className:"px-4 mt-4",children:e.jsx(C,{value:i,onChange:d,allItems:a})}),e.jsx("div",{className:"mt-3 px-4",children:e.jsx(S,{selected:s,onChange:g})}),f?e.jsxs("section",{className:"px-4 mt-5",children:[e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase tracking-widest font-medium mb-3",children:[n.length," result",n.length!==1?"s":""]}),n.length>0?e.jsx("div",{className:"space-y-3",children:n.map((t,r)=>e.jsx(u,{item:t,index:r},t.id))}):e.jsx(T,{})]}):e.jsxs(e.Fragment,{children:[c.length>0&&e.jsxs("section",{className:"mt-5",children:[e.jsx("div",{className:"flex items-center justify-between px-4 mb-3",children:e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Recently viewed"})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide px-4 pb-1",children:c.map((t,r)=>e.jsx("div",{className:"w-56 flex-shrink-0",children:e.jsx(u,{item:t,index:r})},t.id))})]}),e.jsxs("section",{className:"mt-5",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-3",children:[e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Featured"}),e.jsx("button",{onClick:()=>x("/explore"),className:"text-xs font-medium text-[#5B6CF6]",children:"See all â†’"})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide px-4 pb-1",children:h.map((t,r)=>e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx(u,{item:t,index:r})},t.id))})]}),e.jsxs("section",{className:"px-4 mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Listings"})}),e.jsx("div",{className:"space-y-3",children:a.slice(0,6).map((t,r)=>e.jsx(u,{item:t,index:r},t.id))}),e.jsx("button",{onClick:()=>x("/explore"),className:"w-full mt-4 py-3.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-semibold text-gray-700 dark:text-gray-300 active:bg-gray-50 dark:active:bg-gray-700 transition-colors",children:"View all listings"})]})]})]})}function T(){return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"11",cy:"11",r:"7",stroke:"#94A3B8",strokeWidth:"1.8"}),e.jsx("path",{d:"M20 20l-3-3",stroke:"#94A3B8",strokeWidth:"1.8",strokeLinecap:"round"})]})}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Nothing found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try a different search or category"})]})}export{Y as default};
